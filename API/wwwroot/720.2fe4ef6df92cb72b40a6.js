(self.webpackChunkweb_ui=self.webpackChunkweb_ui||[]).push([[720],{8720:(t,n,e)=>{"use strict";e.r(n),e.d(n,{TransactionsModule:()=>M});var a=e(9021),o=e(1116),i=e(7078),s=e(9402),r=e(7368),c=e(3830),l=e(5470),d=e(3492),u=e(1462),g=e(4532),p=e(9891),Z=e(3722),h=e(1158);function m(t,n){if(1&t&&(r.TgZ(0,"option",18),r._uU(1),r.qZA()),2&t){const t=n.$implicit;r.Q6J("ngValue",t.id),r.xp6(1),r.hij(" ",t.name," ")}}function f(t,n){if(1&t&&(r.TgZ(0,"option",18),r._uU(1),r.qZA()),2&t){const t=n.$implicit;r.Q6J("ngValue",t.id),r.xp6(1),r.hij(" ",t.name," ")}}function T(t,n){if(1&t&&(r.TgZ(0,"option",18),r._uU(1),r.qZA()),2&t){const t=n.$implicit;r.Q6J("ngValue",t.id),r.xp6(1),r.hij(" ",t.name," ")}}let A=(()=>{class t{constructor(t,n,e,a,o,i){this.vendorService=t,this.txnService=n,this.activatedRouter=e,this.toastr=a,this.router=o,this.fb=i,this.currentDate=new Date,this.formSubmitted=new r.vpe}ngOnInit(){this.createTransationForm(),this.loadVendors(),this.loadCategories(),this.getTransactionId()}getTransactionId(){const t=this.activatedRouter.snapshot.paramMap.get("id");t&&this.txnService.getTransactionById(t).subscribe(t=>{this.transaction=t,this.fillTransactionDetails()},t=>{console.log(t)})}createTransationForm(){this.transactionForm=this.fb.group({id:[0],name:["",u.kI.required],transactionDate:[new Date,u.kI.required],isExpense:[!0,u.kI.required],paidPartyId:[1,u.kI.required],paidToId:[2,u.kI.required],categoryId:[1,u.kI.required],amount:[null,[u.kI.required]]})}onSubmit(){this.transaction?this.txnService.updateTransaction(this.transactionForm.value).subscribe(t=>{console.log(t),this.toastr.success("Transaction Saved Successfully","Success"),this.router.navigateByUrl("/transactions/list")},t=>{console.log(t)}):this.txnService.addTransaction(this.transactionForm.value).subscribe(t=>{console.log(t),this.toastr.success("Transaction Saved Successfully","Success"),this.transactionForm.reset(),this.formSubmitted.emit(!0)},t=>{console.log(t)})}loadVendors(){this.vendorService.getVendors().subscribe(t=>{this.vendors=t,this.paidToVendors=[...this.vendors]},t=>{console.log(t)})}loadCategories(){this.txnService.getTransactionCategories().subscribe(t=>{this.categories=t},t=>{console.log(t)})}fillTransactionDetails(){this.transaction&&this.transactionForm.setValue({id:this.transaction.id,name:this.transaction.name,amount:this.transaction.amount,categoryId:this.transaction.categoryId,transactionDate:this.transaction.transactionDate,isExpense:this.transaction.isExpense,paidPartyId:this.transaction.paidPartyId,paidToId:this.transaction.paidToId})}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(p.n),r.Y36(c.p),r.Y36(a.gz),r.Y36(d._W),r.Y36(a.F0),r.Y36(u.qu))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-add-transaction"]],outputs:{formSubmitted:"formSubmitted"},decls:33,vars:12,consts:[[1,"container"],[1,"col-10"],[3,"formGroup","ngSubmit"],[3,"formControl","label"],[1,"row"],[1,"col-6"],[1,"form-group"],["for",""],["formControlName","paidPartyId",1,"form-control","col-10"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","paidToId",1,"form-control","col-10"],["formControlName","categoryId",1,"form-control","col-10"],[3,"formControl","label","type"],[1,"form-check"],["type","checkbox","formControlName","isExpense","checked","",1,"form-check-input"],["for","flexCheckChecked",1,"form-check-label"],[1,"btn","btn-success",3,"disabled"],[1,"btn","btn-outline-danger","ml-3",3,"click"],[3,"ngValue"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"form",2),r.NdJ("ngSubmit",function(){return n.onSubmit()}),r._UZ(3,"app-text-input",3),r._UZ(4,"app-date-input",3),r.TgZ(5,"div",4),r.TgZ(6,"div",5),r.TgZ(7,"div",6),r.TgZ(8,"label",7),r._uU(9,"Paid By"),r.qZA(),r.TgZ(10,"select",8),r.YNc(11,m,2,2,"option",9),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"div",5),r.TgZ(13,"div",6),r.TgZ(14,"label",7),r._uU(15,"Paid To"),r.qZA(),r.TgZ(16,"select",10),r.YNc(17,f,2,2,"option",9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"div",6),r.TgZ(19,"label",7),r._uU(20,"Category"),r.qZA(),r.TgZ(21,"select",11),r.YNc(22,T,2,2,"option",9),r.qZA(),r.qZA(),r._UZ(23,"app-text-input",12),r.TgZ(24,"div",6),r.TgZ(25,"div",13),r._UZ(26,"input",14),r.TgZ(27,"label",15),r._uU(28," Expense "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(29,"button",16),r._uU(30,"Save"),r.qZA(),r.TgZ(31,"button",17),r.NdJ("click",function(){return n.transactionForm.reset()}),r._uU(32,"Reset"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("formGroup",n.transactionForm),r.xp6(1),r.Q6J("formControl",n.transactionForm.controls.name)("label","Tranasction Name"),r.xp6(1),r.Q6J("formControl",n.transactionForm.controls.transactionDate)("label","Transaction Date"),r.xp6(7),r.Q6J("ngForOf",n.vendors),r.xp6(6),r.Q6J("ngForOf",n.paidToVendors),r.xp6(5),r.Q6J("ngForOf",n.categories),r.xp6(1),r.Q6J("formControl",n.transactionForm.controls.amount)("label","Amount")("type","number"),r.xp6(6),r.Q6J("disabled",!n.transactionForm.valid))},directives:[u._Y,u.JL,u.sg,Z.t,u.JJ,u.oH,h.Y,u.EJ,u.u,o.sg,u.Wl,u.YN,u.Kr],styles:[""]}),t})();const v=["searchBox"];function q(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"div",15),r.TgZ(1,"p",16),r._uU(2),r.qZA(),r.TgZ(3,"div"),r.TgZ(4,"div",17),r.TgZ(5,"input",18,19),r.NdJ("keyup.enter",function(){return r.CHM(t),r.oxw().onSearch()}),r.qZA(),r.TgZ(7,"button",20),r.NdJ("click",function(){r.CHM(t);const n=r.oxw(),e=r.MAs(24);return n.openModal(e)}),r._uU(8,"Add Transaction"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(2),r.AsE("Showing ",t.transactions.length," of ",t.pagination.count," items")}}function b(t,n){if(1&t&&(r.TgZ(0,"option",21),r._uU(1),r.qZA()),2&t){const t=n.$implicit;r.Q6J("ngValue",t.value),r.xp6(1),r.hij(" ",t.display," ")}}function x(t,n){if(1&t&&(r.TgZ(0,"option",21),r._uU(1),r.qZA()),2&t){const t=n.$implicit;r.Q6J("ngValue",t),r.xp6(1),r.hij(" ",t," ")}}function y(t,n){if(1&t&&(r.TgZ(0,"option",21),r._uU(1),r.qZA()),2&t){const t=n.$implicit;r.Q6J("ngValue",t.value),r.xp6(1),r.hij(" ",t.display," ")}}function J(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td",33),r._uU(2),r.qZA(),r.TgZ(3,"td",8),r.TgZ(4,"strong"),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"td",33),r._uU(7),r.qZA(),r.TgZ(8,"td",33),r._uU(9),r.ALo(10,"date"),r.qZA(),r.TgZ(11,"td",33),r._uU(12),r.ALo(13,"currency"),r.qZA(),r.TgZ(14,"td",33),r._uU(15),r.qZA(),r.TgZ(16,"td",8),r.TgZ(17,"div",34),r.TgZ(18,"i",35),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw(2).editTransaction(n.id)}),r.qZA(),r.TgZ(19,"i",36),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw(2).deleteTransaction(n)}),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=n.$implicit,e=n.index;r.xp6(2),r.hij(" ",e+1," "),r.xp6(3),r.hij(" ",t.name," "),r.xp6(2),r.hij(" ",t.category," "),r.xp6(2),r.hij(" ",r.xi3(10,6,t.transactionDate,"dd/MM/yyyy")," "),r.xp6(3),r.hij(" ",r.lcZ(13,9,t.amount)," "),r.xp6(3),r.hij(" ",t.isExpense," ")}}function S(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"div",22),r.TgZ(1,"div",37),r.TgZ(2,"pagination",38),r.NdJ("pageChanged",function(n){return r.CHM(t),r.oxw(2).onPageChange(n)}),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(2),r.Q6J("boundaryLinks",!0)("itemsPerPage",t.pagination.pageSize)("totalItems",t.pagination.count)}}function C(t,n){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"div",22),r.TgZ(2,"div",23),r.TgZ(3,"div",24),r.TgZ(4,"table",25),r.TgZ(5,"thead"),r.TgZ(6,"tr"),r.TgZ(7,"th",26),r.TgZ(8,"div",27),r._uU(9," No. "),r.qZA(),r.qZA(),r.TgZ(10,"th",26),r.TgZ(11,"div",28),r._uU(12," Transaction Name "),r.qZA(),r.qZA(),r.TgZ(13,"th",26),r.TgZ(14,"div",29),r._uU(15," Category "),r.qZA(),r.qZA(),r.TgZ(16,"th",26),r.TgZ(17,"div",29),r._uU(18," Transaction Date "),r.qZA(),r.qZA(),r.TgZ(19,"th",26),r.TgZ(20,"div",29),r._uU(21," Amount "),r.qZA(),r.qZA(),r.TgZ(22,"th",26),r.TgZ(23,"div",29),r._uU(24," Expense "),r.qZA(),r.qZA(),r.TgZ(25,"th",26),r.TgZ(26,"div",29),r._uU(27," Action "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(28,"tbody"),r.YNc(29,J,20,11,"tr",30),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(30,"div",31),r.YNc(31,S,3,3,"div",32),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(29),r.Q6J("ngForOf",t.transactions),r.xp6(2),r.Q6J("ngIf",t.pagination)}}function _(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"div",39),r.TgZ(1,"h2"),r._uU(2,"There are no Transactions , Add one now"),r.qZA(),r.TgZ(3,"button",20),r.NdJ("click",function(){r.CHM(t);const n=r.oxw(),e=r.MAs(24);return n.openModal(e)}),r._uU(4,"Add Transaction"),r.qZA(),r.qZA()}}function U(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"div",40),r.TgZ(1,"h4",41),r._uU(2,"Add Transaction"),r.qZA(),r.TgZ(3,"button",42),r.NdJ("click",function(){return r.CHM(t),r.oxw().modalRef.hide()}),r.TgZ(4,"span",43),r._uU(5,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(6,"div",44),r.TgZ(7,"app-add-transaction",45),r.NdJ("formSubmitted",function(n){return r.CHM(t),r.oxw().onSuccessfulAdding(n)}),r.qZA(),r.qZA()}}let N=(()=>{class t{constructor(t,n,e,a){this.transactionService=t,this.modalService=n,this.router=e,this.toastr=a,this.transactionParams=new i.F,this.monthNames=[{value:1,display:"January"},{value:2,display:"February"},{value:3,display:"March"},{value:4,display:"April"},{value:5,display:"May"},{value:6,display:"June"},{value:7,display:"July"},{value:8,display:"August"},{value:9,display:"September"},{value:10,display:"October"},{value:11,display:"November"},{value:12,display:"December"}],this.years=function(){let t=[];const n=(new Date).getFullYear(),e=n-1,a=n+1;return t.push(e-1,e,n,a,a+1),t}(),this.order=!0,this.sortOptions=[{value:"amount",display:"Amount"},{value:"txndate",display:"Transaction Date"},{value:"category",display:"Category"},{value:"name",display:"Transaction Name"}],this.selectedSort="txndate"}ngOnInit(){this.transactionParams.month=(new Date).getMonth()+1,this.transactionParams.year=(new Date).getFullYear(),this.loadTransactions()}onSearch(){this.transactionParams.search=this.search.nativeElement.value,this.loadTransactions()}onSuccessfulAdding(t){this.modalRef.hide(),this.loadTransactions()}loadTransactions(){this.transactionService.getTransactions(this.transactionParams).subscribe(t=>{this.transactions=t.result,this.pagination=t.pagination},t=>{console.log(t)})}editTransaction(t){this.router.navigateByUrl("/transactions/"+t)}deleteTransaction(t){this.alertmodalRef=this.modalService.show(s.V,{initialState:{text:"Are you sure you want to delete this transaction"}}),this.alertmodalRef.onHidden.subscribe(()=>{"Declined!"!==this.alertmodalRef.content.message&&this.transactionService.deleteTransaction(t.id).subscribe(t=>{this.toastr.success("Transaction Deleted Successfully","Success"),this.loadTransactions()})})}onPageChange(t){this.transactionParams.pageNumber=t.page,this.loadTransactions()}openModal(t){this.modalRef=this.modalService.show(t)}onMonthChange(t){this.loadTransactions()}onYearChange(t){this.loadTransactions()}onSortChange(t){this.transactionParams.sortBy=`${this.selectedSort}${this.order?"desc":"asc"}`,this.loadTransactions()}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(c.p),r.Y36(l.tT),r.Y36(a.F0),r.Y36(d._W))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-transactions-list"]],viewQuery:function(t,n){if(1&t&&r.Gf(v,5),2&t){let t;r.iGM(t=r.CRH())&&(n.search=t.first)}},decls:25,vars:10,consts:[[1,"container"],["class","d-flex justify-content-between",4,"ngIf"],[1,"row","my-3"],[1,"col-sm-3"],[1,"form-control","col-12",3,"ngModel","change","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-control","col-12",3,"ngModel","ngModelChange","change"],[1,"col-sm-1"],[1,"align-middle"],[1,"form-check","align-middle","py-1"],["type","checkbox","name","order","value","","id","flexCheckIndeterminate",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","flexCheckIndeterminate",1,"form-check-label"],[4,"ngIf"],["class","d-flex justify-content-center mt-5",4,"ngIf"],["template",""],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"form-inline"],["type","text","placeholder","Search",1,"form-control",3,"keyup.enter"],["searchBox",""],[1,"btn","btn-info","ml-2",3,"click"],[3,"ngValue"],[1,"row"],[1,"col-12","py-2","mb-1"],[1,"table-responsive"],[1,"table"],[1,"border-0","bg-light"],[1,"p-2","text-center"],[1,"p-2","text-uppercase"],[1,"p-2","text-center","text-uppercase"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["class","row",4,"ngIf"],[1,"align-middle","text-center"],[1,"d-flex","align-items-center"],[1,"fa","fa-edit","text-success","mr-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"fa","fa-trash","text-danger","m-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"col-xs-12","col-12"],[3,"boundaryLinks","itemsPerPage","totalItems","pageChanged"],[1,"d-flex","justify-content-center","mt-5"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formSubmitted"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0),r.YNc(1,q,9,2,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"select",4),r.NdJ("change",function(t){return n.onMonthChange(t)})("ngModelChange",function(t){return n.transactionParams.month=t}),r.YNc(5,b,2,2,"option",5),r.qZA(),r.qZA(),r.TgZ(6,"div",3),r.TgZ(7,"select",6),r.NdJ("ngModelChange",function(t){return n.transactionParams.year=t})("change",function(t){return n.onYearChange(t)}),r.YNc(8,x,2,2,"option",5),r.qZA(),r.qZA(),r.TgZ(9,"div",7),r.TgZ(10,"span",8),r._uU(11,"Sort By"),r.qZA(),r.qZA(),r.TgZ(12,"div",3),r.TgZ(13,"select",6),r.NdJ("ngModelChange",function(t){return n.selectedSort=t})("change",function(t){return n.onSortChange(t)}),r.YNc(14,y,2,2,"option",5),r.qZA(),r.qZA(),r.TgZ(15,"div",7),r.TgZ(16,"div",9),r.TgZ(17,"input",10),r.NdJ("change",function(t){return n.onSortChange(t)})("ngModelChange",function(t){return n.order=t}),r.qZA(),r.TgZ(18,"label",11),r._uU(19," Descending "),r.qZA(),r.qZA(),r.qZA(),r._UZ(20,"div",7),r.qZA(),r.YNc(21,C,32,2,"div",12),r.qZA(),r.YNc(22,_,5,0,"div",13),r.YNc(23,U,8,0,"ng-template",null,14,r.W1O)),2&t&&(r.xp6(1),r.Q6J("ngIf",n.transactions&&n.transactions.length>0),r.xp6(3),r.Q6J("ngModel",n.transactionParams.month),r.xp6(1),r.Q6J("ngForOf",n.monthNames),r.xp6(2),r.Q6J("ngModel",n.transactionParams.year),r.xp6(1),r.Q6J("ngForOf",n.years),r.xp6(5),r.Q6J("ngModel",n.selectedSort),r.xp6(1),r.Q6J("ngForOf",n.sortOptions),r.xp6(3),r.Q6J("ngModel",n.order),r.xp6(4),r.Q6J("ngIf",n.transactions&&n.transactions.length>0),r.xp6(1),r.Q6J("ngIf",n.transactions&&0===n.transactions.length||!n.transactions))},directives:[o.O5,u.EJ,u.JJ,u.On,o.sg,u.Wl,u.YN,u.Kr,g.Qt,A],pipes:[o.uU,o.H9],styles:[""]}),t})();const k=[{path:"",component:N,data:{breadcrumb:"Transactions"}},{path:"add-transaction",component:A,data:{breadcrumb:"Add Transaction"}},{path:"list",component:N,data:{breadcrumb:"Transactions"}},{path:":id",component:A,data:{breadcrumb:"Edit Transaction"}}];let w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[a.Bz.forChild(k),o.ez],a.Bz]}),t})();var F=e(5425);let M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,F.m],w]}),t})()}}]);