(self.webpackChunkweb_ui=self.webpackChunkweb_ui||[]).push([[858],{7858:(t,e,n)=>{"use strict";n.r(e),n.d(e,{TenantModule:()=>et});var i=n(6521),a=n(1116),o=n(1462),s=n(7368),l=n(529),r=n(4923),c=n(2693);let u=(()=>{class t{constructor(t){this.http=t,this.baseUrl=l.N.baseUrl}getInmates(t,e,n){let i=(0,r.r)(t,e);return n&&(i=i.append("search",n)),(0,r.T)(this.http,this.baseUrl+"Inmates",i)}getInmate(t){return this.http.get(this.baseUrl+"Inmates/"+t)}AddInmate(t){return this.http.post(this.baseUrl+"Inmates",t)}AddInmatePhoto(t,e){const n=new FormData;return n.append("file",t),this.http.patch(this.baseUrl+"Inmates/photo/"+e,n)}getTenantBills(t){return this.http.get(this.baseUrl+"bills/inmate/"+t)}updateInmate(t){return this.http.patch(this.baseUrl+"Inmates",t)}getTenantLeaves(t){return this.http.get(this.baseUrl+"leaves/tenant/"+t)}addLeave(t){return this.http.post(this.baseUrl+"leaves",t)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(c.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n(3492),p=n(3722),g=n(1158);const Z=["inmatePhoto"];let m=(()=>{class t{constructor(t,e,n){this.tenantService=t,this.toast=e,this.router=n,this.staged=!1}ngOnInit(){this.createRegistrationForm()}createRegistrationForm(){this.tenantRegistrationForm=new o.cw({fullName:new o.NI("",o.kI.required),emailAddress:new o.NI("",o.kI.required),phoneNumber:new o.NI("",o.kI.required),dateOfBirth:new o.NI("",o.kI.required),address:new o.NI("",o.kI.required),isVisit:new o.NI("",o.kI.required),isInmateOnTopBed:new o.NI(!0,o.kI.required),inmatePhoto:new o.NI(null)})}addTenant(){this.tenantService.AddInmate(this.tenantRegistrationForm.value).subscribe(t=>{this.uploadInmatePhoto(t.id),this.toast.success("Inmate Added Successfully","Success"),this.router.navigateByUrl("/tenants/list")},t=>{console.log(t)})}onFileChange(t){this.staged=!0}uploadInmatePhoto(t){const e=this.inmatePhoto.nativeElement.files[0];e&&this.tenantService.AddInmatePhoto(e,t).subscribe(t=>{console.log("image uploaded successfully")},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(u),s.Y36(d._W),s.Y36(i.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-add-tenant"]],viewQuery:function(t,e){if(1&t&&s.Gf(Z,5),2&t){let t;s.iGM(t=s.CRH())&&(e.inmatePhoto=t.first)}},decls:40,vars:13,consts:[[1,"inmate-page"],[1,"container"],[1,"d-flext","justify-content-center"],[1,"text-primary"],[1,"lead"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6"],[3,"formControl","label"],[3,"formControl","label","useMaxDate"],[1,"form-group"],["placeholder","Address","formControlName","address","rows","3",1,"form-control"],[2,"margin-top","auto"],[1,"form-check"],["type","radio","formControlName","isVisit","checked","",1,"form-check-input",3,"value"],["for","exampleRadios1",1,"form-check-label"],["type","radio","formControlName","isVisit",1,"form-check-input",3,"value"],[1,"form-group","form-check"],["type","checkbox","formControlName","isInmateOnTopBed",1,"form-check-input"],[1,"form-check-label"],["type","submit",1,"btn","btn-success","btn-lg",3,"disabled"],[1,"col-3"],["type","file",3,"change"],["inmatePhoto",""]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"h4",3),s._uU(4,"Inmate Registration"),s.qZA(),s._UZ(5,"p",4),s.TgZ(6,"form",5),s.NdJ("ngSubmit",function(){return e.addTenant()}),s.TgZ(7,"div",6),s.TgZ(8,"div",7),s._UZ(9,"app-text-input",8),s._UZ(10,"app-text-input",8),s._UZ(11,"app-text-input",8),s._UZ(12,"app-date-input",9),s.TgZ(13,"div",10),s._UZ(14,"textarea",11),s.qZA(),s.TgZ(15,"div",6),s.TgZ(16,"div",7),s.TgZ(17,"h6",12),s.TgZ(18,"strong"),s._uU(19,"Inmate Type"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",7),s.TgZ(21,"div",13),s._UZ(22,"input",14),s.TgZ(23,"label",15),s._uU(24," Regular "),s.qZA(),s.qZA(),s.TgZ(25,"div",13),s._UZ(26,"input",16),s.TgZ(27,"label",15),s._uU(28," Visit "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(29,"div",17),s._UZ(30,"input",18),s.TgZ(31,"label",19),s._uU(32,"Top Bed"),s.qZA(),s.qZA(),s.TgZ(33,"button",20),s._uU(34,"Add Tenant"),s.qZA(),s.qZA(),s.TgZ(35,"div",21),s.TgZ(36,"p",4),s._uU(37,"Upload Inmate Photo"),s.qZA(),s.TgZ(38,"input",22,23),s.NdJ("change",function(t){return e.onFileChange(t)}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(6),s.Q6J("formGroup",e.tenantRegistrationForm),s.xp6(3),s.Q6J("formControl",e.tenantRegistrationForm.controls.fullName)("label","Name"),s.xp6(1),s.Q6J("formControl",e.tenantRegistrationForm.controls.emailAddress)("label","E-mail"),s.xp6(1),s.Q6J("formControl",e.tenantRegistrationForm.controls.phoneNumber)("label","Phone Number"),s.xp6(1),s.Q6J("formControl",e.tenantRegistrationForm.controls.dateOfBirth)("label","Date of Birth")("useMaxDate",!0),s.xp6(10),s.Q6J("value",!1),s.xp6(4),s.Q6J("value",!0),s.xp6(7),s.Q6J("disabled",!e.tenantRegistrationForm.valid))},directives:[o._Y,o.JL,o.sg,p.t,o.JJ,o.oH,g.Y,o.Fj,o.u,o._,o.Wl],styles:[""]}),t})(),h=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-tenant-card"]],inputs:{tenant:"tenant"},decls:11,vars:4,consts:[[1,"card","mb-4","shadow-sm",2,"width","80%"],["alt","",3,"src"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"routerLink"],[1,"text-muted"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s._UZ(1,"img",1),s.TgZ(2,"div",2),s.TgZ(3,"p",3),s._uU(4),s.qZA(),s.TgZ(5,"div",4),s.TgZ(6,"div",5),s.TgZ(7,"button",6),s._uU(8,"View"),s.qZA(),s.qZA(),s.TgZ(9,"small",7),s._uU(10),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.s9C("src",e.tenant.pictureUrl||"assets/images/noimage.png",s.LSH),s.xp6(3),s.Oqu(e.tenant.fullName),s.xp6(3),s.MGl("routerLink","/tenants/",e.tenant.id,""),s.xp6(3),s.Oqu(0===e.tenant.status?"Active":"Inactive"))},directives:[i.rH],styles:[""]}),t})();var f=n(4532);const A=["search"];function v(t,e){1&t&&(s.TgZ(0,"div",3),s.TgZ(1,"h2"),s._uU(2,"There are no Inmates added , Add one now"),s.qZA(),s.TgZ(3,"button",4),s._uU(4,"Add an Inmate"),s.qZA(),s.qZA())}function T(t,e){if(1&t&&(s.TgZ(0,"p",15),s._uU(1),s.qZA()),2&t){const t=s.oxw(2);s.xp6(1),s.AsE("Showing ",t.tenants.length," of ",t.pagination.count," items")}}function b(t,e){if(1&t&&(s.TgZ(0,"div",16),s._UZ(1,"app-tenant-card",17),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Q6J("tenant",t)}}function q(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",18),s.TgZ(1,"div",19),s.TgZ(2,"pagination",20),s.NdJ("pageChanged",function(e){return s.CHM(t),s.oxw(2).onPageChange(e)}),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw(2);s.xp6(2),s.Q6J("boundaryLinks",!0)("itemsPerPage",t.pagination.pageSize)("totalItems",t.pagination.count)}}function x(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",5),s.TgZ(2,"div"),s.YNc(3,T,2,2,"p",6),s.qZA(),s.TgZ(4,"div",7),s.TgZ(5,"button",8),s._uU(6,"Add an Inmate"),s.qZA(),s.TgZ(7,"div",9),s.TgZ(8,"input",10,11),s.NdJ("keyup.enter",function(){return s.CHM(t),s.oxw().onSearch()}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",12),s.YNc(11,b,2,1,"div",13),s.qZA(),s.TgZ(12,"div",3),s.YNc(13,q,3,3,"div",14),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(3),s.Q6J("ngIf",t.tenants&&t.tenants.length>0),s.xp6(8),s.Q6J("ngForOf",t.tenants),s.xp6(2),s.Q6J("ngIf",t.pagination)}}let I=(()=>{class t{constructor(t){this.tenantService=t,this.tenants=[],this.pageNumber=1,this.pageSize=8}ngOnInit(){this.loadInmates()}loadInmates(){this.tenantService.getInmates(this.pageNumber,this.pageSize,this.searchByValue).subscribe(t=>{this.tenants=t.result,this.pagination=t.pagination,this.pageNumber=this.pagination.pageIndex,this.pageSize=this.pagination.pageSize},t=>{console.log(t)})}onPageChange(t){this.pageNumber=t.page,this.pageNumber!==t&&this.loadInmates()}onSearch(){this.searchByValue=this.searchTerm.nativeElement.value,this.loadInmates()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(u))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-tenant-list"]],viewQuery:function(t,e){if(1&t&&s.Gf(A,5),2&t){let t;s.iGM(t=s.CRH())&&(e.searchTerm=t.first)}},decls:3,vars:2,consts:[[1,"container"],["class","d-flex justify-content-center",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["routerLink","/tenants/add-tenant",1,"btn","btn-info","ml-2"],[1,"d-flex","justify-content-between"],["class","text-muted",4,"ngIf"],[1,"form-inline"],["routerLink","/tenants/add-tenant",1,"btn","btn-outline-danger","mr-3"],[1,"form-group","mr-5"],["type","text","placeholder","Search",1,"form-control",3,"keyup.enter"],["search",""],[1,"row","mt-3"],["class","col-3",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"text-muted"],[1,"col-3"],[3,"tenant"],[1,"row"],[1,"col-xs-12","col-12"],[3,"boundaryLinks","itemsPerPage","totalItems","pageChanged"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.YNc(1,v,5,0,"div",1),s.YNc(2,x,14,3,"div",2),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",e.tenants&&0===e.tenants.length||!e.tenants),s.xp6(1),s.Q6J("ngIf",e.tenants&&e.tenants.length>0))},directives:[a.O5,i.rH,a.sg,h,f.Qt],styles:[""]}),t})();var U=n(1630),_=n(4867),y=n(4668),N=n(5470);let w=(()=>{class t{constructor(t,e,n){this.fb=t,this.tenantService=e,this.toastr=n,this.leaveApplied=new s.vpe}ngOnInit(){this.createLeaveForm()}createLeaveForm(){this.leaveForm=this.fb.group({inmateId:[this.tenantId,o.kI.required],leaveReason:["",o.kI.required],fromDate:[new Date,o.kI.required],toDate:[new Date,o.kI.required]})}onSubmit(){this.tenantService.addLeave(this.leaveForm.value).subscribe(t=>{this.toastr.success("Leave Applied Successfully","Success"),this.leaveForm.reset(),this.leaveApplied.emit(!0)},t=>{this.toastr.error("Error Occured","Error")})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.qu),s.Y36(u),s.Y36(d._W))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-apply-leave"]],inputs:{tenantId:"tenantId"},outputs:{leaveApplied:"leaveApplied"},decls:15,vars:8,consts:[[1,"container"],[1,"col-10"],[3,"formGroup","ngSubmit"],["for",""],[3,"formControl","label"],[1,"btn","btn-success",3,"disabled"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div"),s.TgZ(2,"div",1),s.TgZ(3,"form",2),s.NdJ("ngSubmit",function(){return e.onSubmit()}),s.TgZ(4,"label",3),s._uU(5,"Leave Reason"),s.qZA(),s._UZ(6,"app-text-input",4),s.TgZ(7,"label",3),s._uU(8,"From Date"),s.qZA(),s._UZ(9,"app-date-input",4),s.TgZ(10,"label",3),s._uU(11,"To Date"),s.qZA(),s._UZ(12,"app-date-input",4),s.TgZ(13,"button",5),s._uU(14,"Apply"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(3),s.Q6J("formGroup",e.leaveForm),s.xp6(3),s.Q6J("formControl",e.leaveForm.controls.leaveReason)("label","Leave Reason"),s.xp6(3),s.Q6J("formControl",e.leaveForm.controls.fromDate)("label","From Date"),s.xp6(3),s.Q6J("formControl",e.leaveForm.controls.toDate)("label","To Date"),s.xp6(1),s.Q6J("disabled",e.leaveForm.invalid))},directives:[o._Y,o.JL,o.sg,p.t,o.JJ,o.oH,g.Y],styles:[""]}),t})();function J(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"h3"),s._uU(2,"There are no leaves to display"),s.qZA(),s.TgZ(3,"div",3),s.TgZ(4,"button",4),s.NdJ("click",function(){s.CHM(t);const e=s.oxw(),n=s.MAs(4);return e.openModal(n)}),s._uU(5,"Add Leave"),s.qZA(),s.qZA(),s.qZA()}}function C(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.ALo(5,"date"),s.qZA(),s.TgZ(6,"td"),s._uU(7),s.ALo(8,"date"),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.qZA(),s.TgZ(11,"td"),s._uU(12),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(2),s.Oqu(t.id),s.xp6(2),s.Oqu(s.lcZ(5,5,t.fromDate)),s.xp6(3),s.Oqu(s.lcZ(8,7,t.toDate)),s.xp6(3),s.Oqu(t.leaveReason),s.xp6(2),s.Oqu(t.status)}}function S(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",5),s.TgZ(2,"button",4),s.NdJ("click",function(){s.CHM(t);const e=s.oxw(),n=s.MAs(4);return e.openModal(n)}),s._uU(3,"Add Leave"),s.qZA(),s.qZA(),s.TgZ(4,"table",6),s.TgZ(5,"thead"),s.TgZ(6,"tr"),s.TgZ(7,"th"),s._uU(8,"Id"),s.qZA(),s.TgZ(9,"th"),s._uU(10,"From Date"),s.qZA(),s.TgZ(11,"th"),s._uU(12,"To Date"),s.qZA(),s.TgZ(13,"th"),s._uU(14,"Reason"),s.qZA(),s.TgZ(15,"th"),s._uU(16,"Status"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"tbody"),s.YNc(18,C,13,9,"tr",7),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(18),s.Q6J("ngForOf",t.leaves)}}function F(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",8),s.TgZ(1,"h4",9),s._uU(2,"Leave Request"),s.qZA(),s.TgZ(3,"button",10),s.NdJ("click",function(){return s.CHM(t),s.oxw().modalRef.hide()}),s.TgZ(4,"span",11),s._uU(5,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",12),s.TgZ(7,"app-apply-leave",13),s.NdJ("leaveApplied",function(e){return s.CHM(t),s.oxw().leaveApplyStatus(e)}),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(7),s.Q6J("tenantId",t.tenantId)}}let M=(()=>{class t{constructor(t){this.modalService=t,this.leaveSuccessEvent=new s.vpe}ngOnInit(){}openModal(t){this.modalRef=this.modalService.show(t)}leaveApplyStatus(t){console.log("leave applied"),this.leaveSuccessEvent.emit(!0),this.modalRef.hide()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(N.tT))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-tenant-leave"]],inputs:{leaves:"leaves",tenantId:"tenantId"},outputs:{leaveSuccessEvent:"leaveSuccessEvent"},decls:5,vars:2,consts:[[1,"container"],[4,"ngIf"],["template",""],[1,"d-flex","justify-content-start"],[1,"btn","btn-success",3,"click"],[1,"d-flex","justify-content-end"],[1,"table","table-striped","table-bordered","mt-4"],[4,"ngFor","ngForOf"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"tenantId","leaveApplied"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.YNc(1,J,6,0,"div",1),s.YNc(2,S,19,1,"div",1),s.qZA(),s.YNc(3,F,8,1,"ng-template",null,2,s.W1O)),2&t&&(s.xp6(1),s.Q6J("ngIf",e.leaves&&0===e.leaves.length),s.xp6(1),s.Q6J("ngIf",e.leaves&&e.leaves.length>0))},directives:[a.O5,a.sg,w],pipes:[a.uU],styles:[""]}),t})();var B=n(7930);function O(t,e){1&t&&(s.TgZ(0,"th",9),s._uU(1,"Paid"),s.qZA())}function k(t,e){1&t&&(s.TgZ(0,"th",10),s._uU(1,"Not Paid"),s.qZA())}function Q(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s.TgZ(4,"small"),s.TgZ(5,"i"),s._uU(6),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.ALo(9,"currency"),s.qZA(),s.qZA()),2&t){const t=e.$implicit,n=e.index;s.xp6(2),s.Oqu(n+1),s.xp6(4),s.Oqu(t.itemCategoryName),s.xp6(2),s.Oqu(s.xi3(9,3,t.amount,"AED "))}}function Y(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",11),s.NdJ("click",function(){s.CHM(t);const e=s.oxw(),n=s.MAs(27);return e.openModal(n)}),s._uU(1,"Pay"),s.qZA()}}function D(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"h4",13),s._uU(2),s.qZA(),s.TgZ(3,"button",14),s.NdJ("click",function(){return s.CHM(t),s.oxw().modalRef.hide()}),s.TgZ(4,"span",15),s._uU(5,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",16),s.TgZ(7,"app-bill-payment",17),s.NdJ("paymentSuccess",function(e){return s.CHM(t),s.oxw().paymentSuccessEvent(e)}),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(2),s.hij("Bill No - ",t.inmateBill.id,""),s.xp6(5),s.Q6J("inputBillId",t.inmateBill.id)("inputInmateId",t.inmateBill.inmateId)("inputAmount",t.inmateBill.billAmount)}}let L=(()=>{class t{constructor(t){this.modalService=t,this.customClass="",this.billPaid=new s.vpe}ngOnInit(){}openModal(t){this.modalRef=this.modalService.show(t)}paymentSuccessEvent(t){this.modalRef.hide(),this.billPaid.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(N.tT))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-tenant-bill"]],inputs:{inmateBill:"inmateBill"},outputs:{billPaid:"billPaid"},decls:28,vars:10,consts:[[3,"panelClass","heading"],[1,"table","table-bordered","table-warning"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-warning"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["class","btn btn-success",3,"click",4,"ngIf"],["template",""],[1,"text-success"],[1,"text-danger"],[1,"btn","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"inputBillId","inputInmateId","inputAmount","paymentSuccess"]],template:function(t,e){1&t&&(s.TgZ(0,"accordion-group",0),s.TgZ(1,"table",1),s.TgZ(2,"tr"),s._UZ(3,"th"),s.TgZ(4,"th"),s._uU(5,"Total Bill Amount"),s.qZA(),s.TgZ(6,"th"),s._uU(7),s.ALo(8,"currency"),s.qZA(),s.qZA(),s.TgZ(9,"tr"),s._UZ(10,"th"),s.TgZ(11,"th"),s._uU(12,"Payment Status"),s.qZA(),s.YNc(13,O,2,0,"th",2),s.YNc(14,k,2,0,"th",3),s.qZA(),s.TgZ(15,"tr"),s._UZ(16,"td"),s.TgZ(17,"td",4),s.TgZ(18,"strong"),s._uU(19,"Category"),s.qZA(),s.qZA(),s.TgZ(20,"td",4),s.TgZ(21,"strong"),s._uU(22,"Amount"),s.qZA(),s.qZA(),s.qZA(),s.YNc(23,Q,10,6,"tr",5),s.qZA(),s.TgZ(24,"div",6),s.YNc(25,Y,2,0,"button",7),s.qZA(),s.qZA(),s.YNc(26,D,8,4,"ng-template",null,8,s.W1O)),2&t&&(s.hYB("heading","Bill - ",e.inmateBill.month," ",e.inmateBill.year,""),s.xp6(7),s.Oqu(s.xi3(8,7,e.inmateBill.billAmount,"AED ")),s.xp6(6),s.Q6J("ngIf",0!==e.inmateBill.paymentStatus),s.xp6(1),s.Q6J("ngIf",0===e.inmateBill.paymentStatus),s.xp6(9),s.Q6J("ngForOf",e.inmateBill.billItems),s.xp6(2),s.Q6J("ngIf",0===e.inmateBill.paymentStatus))},directives:[y.U_,a.O5,a.sg,B.p],pipes:[a.H9],styles:[""]}),t})();function R(t,e){if(1&t&&(s.TgZ(0,"option",33),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("ngValue",t.value),s.xp6(1),s.hij(" ",t.display," ")}}function H(t,e){if(1&t&&(s.TgZ(0,"option",33),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("ngValue",t.value),s.xp6(1),s.hij(" ",t.display," ")}}function E(t,e){if(1&t&&(s.TgZ(0,"option",33),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("ngValue",t.value),s.xp6(1),s.hij(" ",t.display," ")}}function P(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"h5",21),s._uU(2,"Inmate Status"),s.qZA(),s.TgZ(3,"select",34),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw(2).inmate.status=e}),s.YNc(4,E,2,2,"option",18),s.qZA(),s.qZA()}if(2&t){const t=s.oxw(2);s.xp6(3),s.Q6J("disabled",t.editDisabled)("ngModel",t.inmate.status),s.xp6(1),s.Q6J("ngForOf",t.statusOptions)}}function V(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",35),s.NdJ("click",function(){return s.CHM(t),s.oxw(2).editDisabled=!1})("click",function(){return s.CHM(t),s.oxw(2).onUpdate()}),s._uU(1,"Save Changes"),s.qZA()}}function j(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",36),s.NdJ("click",function(){return s.CHM(t),s.oxw(2).editDisabled=!1}),s._uU(1,"Edit Details"),s.qZA()}}function z(t,e){1&t&&(s.TgZ(0,"div"),s.TgZ(1,"h3"),s._uU(2,"There are no Bills to display"),s.qZA(),s.qZA())}function G(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"app-tenant-bill",38),s.NdJ("billPaid",function(e){return s.CHM(t),s.oxw(3).onBillPaid(e)}),s.qZA()}2&t&&s.Q6J("inmateBill",e.$implicit)}function X(t,e){if(1&t&&(s.TgZ(0,"accordion"),s.YNc(1,G,1,1,"app-tenant-bill",37),s.qZA()),2&t){const t=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",t.inmateBills)}}function $(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s._UZ(5,"img",5),s.TgZ(6,"div",6),s.TgZ(7,"div"),s.TgZ(8,"h4",7),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"div"),s.TgZ(11,"strong"),s._uU(12,"Contact Number:"),s.qZA(),s.TgZ(13,"p"),s._uU(14),s.qZA(),s.qZA(),s.TgZ(15,"div"),s.TgZ(16,"strong"),s._uU(17,"Age:"),s.qZA(),s.TgZ(18,"p"),s._uU(19),s.qZA(),s.qZA(),s.TgZ(20,"div"),s.TgZ(21,"strong"),s._uU(22,"Member Status:"),s.qZA(),s.TgZ(23,"p"),s._uU(24),s.qZA(),s.qZA(),s.qZA(),s._UZ(25,"div",8),s.qZA(),s.qZA(),s.TgZ(26,"div",9),s.TgZ(27,"tabset",10,11),s.TgZ(29,"tab",12),s.NdJ("selectTab",function(e){return s.CHM(t),s.oxw().onSelect(e)}),s.TgZ(30,"form",13,14),s.NdJ("ngSubmit",function(){return s.CHM(t),s.oxw().onUpdate()}),s.TgZ(32,"div",2),s.TgZ(33,"div",15),s.TgZ(34,"h5",16),s._uU(35,"Email Address"),s.qZA(),s.TgZ(36,"p"),s._uU(37),s.qZA(),s.TgZ(38,"h5",16),s._uU(39,"Inmate Type"),s.qZA(),s.TgZ(40,"select",17),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().inmate.isVisit=e}),s.YNc(41,R,2,2,"option",18),s.qZA(),s.TgZ(42,"h5",16),s._uU(43,"Bed Type"),s.qZA(),s.TgZ(44,"select",19),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().inmate.isInmateOnTopBed=e}),s.YNc(45,H,2,2,"option",18),s.qZA(),s.TgZ(46,"h5",16),s._uU(47,"Address"),s.qZA(),s.TgZ(48,"p"),s._uU(49),s.qZA(),s.YNc(50,P,5,3,"div",0),s.qZA(),s.TgZ(51,"div",15),s.TgZ(52,"h5",16),s._uU(53,"Amount Due"),s.qZA(),s.TgZ(54,"input",20),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().inmate.amountDue=e}),s.qZA(),s.TgZ(55,"h5",21),s._uU(56,"Savings"),s.qZA(),s.TgZ(57,"input",22),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().inmate.savings=e}),s.qZA(),s.TgZ(58,"h5",21),s._uU(59,"Room Number"),s.qZA(),s.TgZ(60,"p",23),s._uU(61,"4"),s._UZ(62,"i",24),s.qZA(),s.TgZ(63,"small",25),s.TgZ(64,"i"),s._uU(65,"*Room number details are not supported as of now"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(66,"div",26),s.YNc(67,V,2,0,"button",27),s.YNc(68,j,2,0,"button",28),s.TgZ(69,"button",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().onReset()}),s._uU(70,"Reset"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(71,"tab",30),s.NdJ("selectTab",function(e){return s.CHM(t),s.oxw().onSelect(e)}),s.YNc(72,z,3,0,"div",0),s.YNc(73,X,2,1,"accordion",0),s.qZA(),s.TgZ(74,"tab",31),s.NdJ("selectTab",function(e){return s.CHM(t),s.oxw().onSelect(e)}),s.TgZ(75,"accordion"),s.TgZ(76,"app-tenant-leave",32),s.NdJ("leaveSuccessEvent",function(e){return s.CHM(t),s.oxw().onLeaveAddedSuccess(e)}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(5),s.s9C("src",t.inmate.pictureUrl||"assets/images/man.png",s.LSH),s.s9C("alt",t.inmate.fullName),s.xp6(4),s.Oqu(t.inmate.fullName),s.xp6(5),s.Oqu(t.inmate.phoneNumber),s.xp6(5),s.Oqu(t.inmate.age),s.xp6(5),s.Oqu(0==t.inmate.status?"Active":"Inactive"),s.xp6(13),s.Oqu(t.inmate.emailAddress||"None"),s.xp6(3),s.Q6J("disabled",t.editDisabled)("ngModel",t.inmate.isVisit),s.xp6(1),s.Q6J("ngForOf",t.tenantOptions),s.xp6(3),s.Q6J("disabled",t.editDisabled)("ngModel",t.inmate.isInmateOnTopBed),s.xp6(1),s.Q6J("ngForOf",t.bedTypeOptions),s.xp6(4),s.Oqu(t.inmate.address),s.xp6(1),s.Q6J("ngIf",!t.editDisabled),s.xp6(4),s.Q6J("disabled",t.editDisabled)("ngModel",t.inmate.amountDue),s.xp6(3),s.Q6J("disabled",t.editDisabled)("ngModel",t.inmate.savings),s.xp6(10),s.Q6J("ngIf",!1===t.editDisabled),s.xp6(1),s.Q6J("ngIf",!0===t.editDisabled),s.xp6(4),s.Q6J("ngIf",0===t.inmateBills.length),s.xp6(1),s.Q6J("ngIf",t.inmateBills.length>0),s.xp6(3),s.Q6J("leaves",t.leaves)("tenantId",t.inmate.id)}}const W=[{path:"",component:I,data:{breadcrumb:"Inmates"}},{path:"add-tenant",component:m,data:{breadcrumb:"Add Inmate"}},{path:"list",component:I,data:{breadcrumb:"Inmates"}},{path:":id",component:(()=>{class t{constructor(t,e,n){this.activatedRoute=t,this.tenantService=e,this.bcService=n,this.inmateBills=[],this.editDisabled=!0,this.tenantOptions=[{value:!0,display:"Visit"},{value:!1,display:"Regular"}],this.bedTypeOptions=[{value:!0,display:"Top Bed"},{value:!1,display:"Bottom Bed"}],this.statusOptions=[{value:0,display:"Active"},{value:1,display:"Left"},{value:2,display:"Away"},{value:3,display:"Leaving"}]}ngOnInit(){this.loadTenant()}loadTenant(){const t=this.activatedRoute.snapshot.paramMap.get("id");this.tenantService.getInmate(parseInt(t)).subscribe(t=>{this.inmate=t,this.bcService.set("@inmateName",this.inmate.fullName)},t=>{console.log(t)})}loadTenantBills(){this.tenantService.getTenantBills(this.inmate.id).subscribe(t=>{this.inmateBills=t},t=>{console.log(t)})}loadTenantLeaves(){this.tenantService.getTenantLeaves(this.inmate.id).subscribe(t=>{this.leaves=t},t=>{console.log(t)})}onSelect(t){"Bill Details"===t.heading&&this.loadTenantBills(),"Leaves"===t.heading&&this.loadTenantLeaves()}onBillPaid(t){this.loadTenantBills()}onUpdate(){this.tenantService.updateInmate(this.inmate).subscribe(t=>{console.log("updated succesfully")},t=>{console.log(t)})}onReset(){this.editDisabled=!0,this.loadTenant()}onLeaveAddedSuccess(t){this.loadTenantLeaves()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(i.gz),s.Y36(u),s.Y36(U.pm))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-tenant-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","px-4"],[1,"row"],[1,"col-4"],[1,"card"],[1,"card-img-top","img-thumbnail",3,"src","alt"],[1,"card-body"],[1,"text-info"],[1,"card-footer"],[1,"col-8"],[1,"member-tabset"],["memberTabs",""],["heading","Basic Info",3,"selectTab"],[3,"ngSubmit"],["form","ngForm"],[1,"col-5"],[1,"text-success"],["name","isVisit",1,"form-control","col-5","my-2",3,"disabled","ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["name","isInmateOnTopBed",1,"form-control","col-7","my-2",3,"disabled","ngModel","ngModelChange"],["type","number","name","amountDue",1,"form-control","col-6",3,"disabled","ngModel","ngModelChange"],[1,"text-success","mt-2"],["type","number","name","savings",1,"form-control","col-6",3,"disabled","ngModel","ngModelChange"],[1,"lead"],[1,"fa","fa-edit","fa-3","ml-3"],[1,"text-muted"],[1,"mt-2"],["type","submit","class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-danger ml-2",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary","ml-2",3,"click"],["heading","Bill Details",3,"selectTab"],["heading","Leaves",3,"selectTab"],[3,"leaves","tenantId","leaveSuccessEvent"],[3,"ngValue"],["name","status",1,"form-control","col-7","my-2",3,"disabled","ngModel","ngModelChange"],["type","submit",1,"btn","btn-success",3,"click"],[1,"btn","btn-danger","ml-2",3,"click"],[3,"inmateBill","billPaid",4,"ngFor","ngForOf"],[3,"inmateBill","billPaid"]],template:function(t,e){1&t&&s.YNc(0,$,77,25,"div",0),2&t&&s.Q6J("ngIf",e.inmate)},directives:[a.O5,_.AH,_.wW,o._Y,o.JL,o.F,o.EJ,o.JJ,o.On,a.sg,o.wV,o.Fj,y.Zf,M,o.YN,o.Kr,L],styles:[".card[_ngcontent-%COMP%]{width:70%;margin-left:10%}"]}),t})(),data:{breadcrumb:{alias:"inmateName"}}}];let K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.ez,i.Bz.forChild(W)],i.Bz]}),t})();var tt=n(5425);let et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.ez,tt.m,i.Bz],K]}),t})()}}]);