(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{h3gT:function(t,e,n){"use strict";n.r(e),n.d(e,"BillModule",function(){return w});var i=n("tyNb"),b=n("ofXK"),l=n("fXoL"),c=n("FayF"),a=n("5eHb"),o=n("3Pt+");function s(t,e){if(1&t&&(l.Rb(0,"option",14),l.Cc(1),l.Qb()),2&t){const t=e.$implicit,n=l.ac();l.gc("value",n.monthNames.indexOf(t)+1),l.zb(1),l.Ec("",t," ")}}function r(t,e){if(1&t&&(l.Rb(0,"li",28),l.Rb(1,"div",29),l.Rb(2,"p",30),l.Cc(3),l.Qb(),l.Rb(4,"p",30),l.Cc(5),l.bc(6,"currency"),l.Qb(),l.Qb(),l.Qb()),2&t){const t=e.$implicit;l.zb(3),l.Dc(t.transactionDetailName),l.zb(2),l.Dc(l.cc(6,2,t.amount))}}function d(t,e){if(1&t&&(l.Rb(0,"tr"),l.Rb(1,"td"),l.Cc(2),l.Qb(),l.Rb(3,"td"),l.Rb(4,"ul",25),l.Ac(5,r,7,4,"li",26),l.Qb(),l.Qb(),l.Rb(6,"td",27),l.Rb(7,"h4"),l.Cc(8),l.bc(9,"currency"),l.Qb(),l.Qb(),l.Qb()),2&t){const t=e.$implicit;l.zb(2),l.Dc(t.categoryName),l.zb(3),l.gc("ngForOf",t.transactionDetails),l.zb(3),l.Dc(l.cc(9,3,t.totalAmount))}}function u(t,e){if(1&t){const t=l.Sb();l.Rb(0,"div"),l.Rb(1,"div",15),l.Rb(2,"table",16),l.Rb(3,"tr",17),l.Rb(4,"td"),l.Rb(5,"strong"),l.Rb(6,"h3"),l.Cc(7,"Transactions For "),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"td",18),l.Rb(9,"h3"),l.Cc(10),l.Qb(),l.Qb(),l.Mb(11,"td"),l.Qb(),l.Mb(12,"tr",19),l.Ac(13,d,10,5,"tr",20),l.Rb(14,"tr"),l.Mb(15,"td"),l.Rb(16,"td",21),l.Rb(17,"h4"),l.Cc(18,"Total"),l.Qb(),l.Qb(),l.Rb(19,"td",22),l.Rb(20,"h4"),l.Cc(21),l.bc(22,"currency"),l.Qb(),l.Qb(),l.Qb(),l.Rb(23,"tr"),l.Mb(24,"td"),l.Rb(25,"td",23),l.Rb(26,"button",24),l.Yb("click",function(){return l.uc(t),l.ac().onProceeding()}),l.Cc(27,"Generate Individual Bills"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&t){const t=l.ac();l.zb(10),l.Fc("",t.getMonthName(t.selectedMonth-1),",",t.selectedYear,""),l.zb(3),l.gc("ngForOf",t.monthlyBill.categoryWiseExpenses),l.zb(8),l.Dc(l.cc(22,4,t.monthlyBill.subTotal))}}let g=(()=>{class t{constructor(t,e){this.billService=t,this.toastr=e,this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.selectedMonth=(new Date).getUTCMonth(),this.selectedYear=(new Date).getUTCFullYear()}ngOnInit(){}onSubmit(){this.billService.generateMonthlyBills(this.selectedMonth,this.selectedYear).subscribe(t=>{this.monthlyBill=t},t=>{})}onProceeding(){this.billService.generateIndividualBills(this.selectedMonth,this.selectedYear).subscribe(t=>{this.toastr.success("Bills Generated Succesfully","Success")},t=>{this.toastr.error("Some Error occured","Error")})}getMonthName(t){return this.monthNames[t]}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(c.a),l.Lb(a.b))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-generate-bill"]],decls:21,vars:4,consts:[[1,"text-center"],[1,"container"],[3,"ngSubmit"],["billForm","ngForm"],[1,"row"],[1,"col-4"],[1,"lead"],["name","selectedMonth",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","year"],["type","number","name","selectedYear",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-1"],[1,"btn","btn-primary","mt-1"],[4,"ngIf"],[3,"value"],[1,"container","mt-5"],[1,"table","table-hover"],[1,"bg-light"],[1,"text-center","text-danger","text-strong"],[1,"bg-info"],[4,"ngFor","ngForOf"],[1,"text-dark"],[1,"align-middle","text-success"],["colspan","2"],[1,"btn","btn-outline-danger","btn-lg",3,"click"],[1,"list-group"],["class","list-group-item list-group-item-secondary",4,"ngFor","ngForOf"],[1,"align-middle"],[1,"list-group-item","list-group-item-secondary"],[1,"d-flex","justify-content-between"],[1,"text-info"]],template:function(t,e){1&t&&(l.Rb(0,"div"),l.Rb(1,"h2",0),l.Cc(2,"Generate Bill"),l.Qb(),l.Rb(3,"div",1),l.Rb(4,"form",2,3),l.Yb("ngSubmit",function(){return e.onSubmit()}),l.Rb(6,"div",4),l.Rb(7,"div",5),l.Rb(8,"h4",6),l.Cc(9,"Select Month"),l.Qb(),l.Rb(10,"select",7),l.Yb("ngModelChange",function(t){return e.selectedMonth=t}),l.Ac(11,s,2,2,"option",8),l.Qb(),l.Qb(),l.Rb(12,"div",5),l.Rb(13,"label",9),l.Cc(14,"Year"),l.Qb(),l.Rb(15,"input",10),l.Yb("ngModelChange",function(t){return e.selectedYear=t}),l.Qb(),l.Qb(),l.Rb(16,"div",11),l.Mb(17,"label"),l.Rb(18,"button",12),l.Cc(19,"Generate"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Ac(20,u,28,6,"div",13),l.Qb(),l.Qb()),2&t&&(l.zb(10),l.gc("ngModel",e.selectedMonth),l.zb(1),l.gc("ngForOf",e.monthNames),l.zb(4),l.gc("ngModel",e.selectedYear),l.zb(5),l.gc("ngIf",e.monthlyBill))},directives:[o.w,o.n,o.o,o.u,o.m,o.p,b.l,o.r,o.b,b.m,o.q,o.x],pipes:[b.d],styles:[""]}),t})();class m{constructor(t,e,n,i){this.month=n,this.year=i,this.pageNumber=t,this.pageSize=e}}var h=n("K3ix"),p=n("s3T5"),f=n("Lm2G"),R=n("SngD");const Q=["search"];function v(t,e){if(1&t){const t=l.Sb();l.Rb(0,"button",22),l.Yb("click",function(){return l.uc(t),l.ac().onFilterChange()})("ngModelChange",function(e){return l.uc(t),l.ac().billParams.paidPredicate=e}),l.Cc(1),l.Qb()}if(2&t){const t=e.$implicit,n=l.ac();l.hc("btnRadio",t.value),l.gc("ngModel",n.billParams.paidPredicate),l.zb(1),l.Dc(t.display)}}function y(t,e){if(1&t&&(l.Rb(0,"p",23),l.Cc(1),l.Qb()),2&t){const t=l.ac();l.zb(1),l.Fc("Showing ",t.inmateBills.length," of ",t.pagination.count," items")}}function C(t,e){if(1&t){const t=l.Sb();l.Rb(0,"div"),l.Rb(1,"button",27),l.Yb("click",function(){l.uc(t);const e=l.ac().$implicit,n=l.ac(),i=l.rc(40);return n.payBill(e,i)}),l.Cc(2,"Pay"),l.Qb(),l.Qb()}}function M(t,e){if(1&t&&(l.Rb(0,"tr"),l.Rb(1,"td",24),l.Rb(2,"strong"),l.Cc(3),l.Qb(),l.Qb(),l.Rb(4,"td",25),l.Cc(5),l.Qb(),l.Rb(6,"td",25),l.Cc(7),l.bc(8,"currency"),l.Qb(),l.Rb(9,"td",25),l.Cc(10),l.Qb(),l.Rb(11,"td",25),l.Ac(12,C,3,0,"div",26),l.Qb(),l.Qb()),2&t){const t=e.$implicit;l.zb(3),l.Ec(" ",t.inmate," "),l.zb(2),l.Fc(" ",t.month," , ",t.year," "),l.zb(2),l.Ec(" ",l.cc(8,6,t.billAmount)," "),l.zb(3),l.Ec(" ",0===t.paymentStatus?"Not Paid":"Paid"," "),l.zb(2),l.gc("ngIf",0===t.paymentStatus)}}function P(t,e){if(1&t){const t=l.Sb();l.Rb(0,"div",1),l.Rb(1,"div",28),l.Rb(2,"pagination",29),l.Yb("pageChanged",function(e){return l.uc(t),l.ac().onPageChange(e)}),l.Qb(),l.Qb(),l.Qb()}if(2&t){const t=l.ac();l.zb(2),l.gc("boundaryLinks",!0)("itemsPerPage",t.pagination.pageSize)("totalItems",t.pagination.count)}}function S(t,e){if(1&t){const t=l.Sb();l.Rb(0,"div",30),l.Rb(1,"h4",31),l.Cc(2,"Modal"),l.Qb(),l.Rb(3,"button",32),l.Yb("click",function(){return l.uc(t),l.ac().modalRef.hide()}),l.Rb(4,"span",33),l.Cc(5,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(6,"div",34),l.Rb(7,"app-bill-payment",35),l.Yb("paymentSuccess",function(e){l.uc(t);const n=l.ac(),i=l.rc(40);return n.onPaymentSuccess(e,i)}),l.Qb(),l.Qb()}if(2&t){const t=l.ac();l.zb(7),l.gc("inputAmount",t.selectedBill.billAmount)("inputInmateId",t.selectedBill.inmateId)("inputBillId",t.selectedBill.id)}}let B=(()=>{class t{constructor(t,e){this.billService=t,this.modalService=e,this.inmateBills=[],this.billParams=new m(1,5,null,null),this.filtersList=[{value:void 0,display:"All"},{value:"NotPaid",display:"Not Paid"},{value:"PartiallyPaid",display:"Not Fully Paid"},{value:"Paid",display:"Paid"}]}ngOnInit(){this.billParams.paidPredicate="NotPaid",this.loadBills()}loadBills(){this.billService.getBills(this.billParams).subscribe(t=>{this.inmateBills=t.result,this.pagination=t.pagination})}onPageChange(t){this.billParams.pageNumber=t.page,this.loadBills()}openModal(t){this.modalRef=this.modalService.show(t)}payBill(t,e){this.selectedBill=t,this.modalRef=this.modalService.show(e)}onPaymentSuccess(t,e){this.loadBills(),this.modalRef.hide()}onFilterChange(){this.billParams.pageNumber=1,this.billParams.pageSize=5,this.loadBills()}onSearch(){this.billParams.search=this.search.nativeElement.value,this.billParams.pageNumber=1,this.billParams.pageSize=5,this.loadBills()}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(c.a),l.Lb(h.b))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-bill-list"]],viewQuery:function(t,e){if(1&t&&l.Gc(Q,1),2&t){let t;l.qc(t=l.Zb())&&(e.search=t.first)}},decls:41,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-1"],[1,"col-sm-9","py-2","mb-1"],[1,"d-flex","justify-content-between"],["name","paidPredicate",1,"btn-group"],["class","btn btn-outline-success btn-lg",3,"btnRadio","ngModel","click","ngModelChange",4,"ngFor","ngForOf"],["routerLink","/bills/add-bill",1,"btn","btn-info","btn-lg"],[1,"d-flex","justify-content-between","mt-2"],["class","text-muted",4,"ngIf"],[1,"form-inline"],["type","text","placeholder","Search",1,"form-control",3,"keyup.enter"],["search",""],[1,"table-responsive","mt-1"],[1,"table"],[1,"border-0","bg-light"],[1,"p-2","text-left","text-uppercase"],[1,"p-2","text-center","text-uppercase"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["class","row",4,"ngIf"],["template",""],[1,"btn","btn-outline-success","btn-lg",3,"btnRadio","ngModel","click","ngModelChange"],[1,"text-muted"],[1,"align-middle","text-left"],[1,"align-middle","text-center"],[4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"col-xs-12","col-12"],[3,"boundaryLinks","itemsPerPage","totalItems","pageChanged"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"inputAmount","inputInmateId","inputBillId","paymentSuccess"]],template:function(t,e){1&t&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Mb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"div",4),l.Rb(5,"div",5),l.Ac(6,v,2,3,"button",6),l.Qb(),l.Rb(7,"a",7),l.Cc(8,"Generate Monthly Bill"),l.Qb(),l.Qb(),l.Rb(9,"div",8),l.Rb(10,"div"),l.Ac(11,y,2,2,"p",9),l.Qb(),l.Rb(12,"div"),l.Rb(13,"div",10),l.Rb(14,"input",11,12),l.Yb("keyup.enter",function(){return e.onSearch()}),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(16,"div",13),l.Rb(17,"table",14),l.Rb(18,"thead"),l.Rb(19,"tr"),l.Rb(20,"th",15),l.Rb(21,"div",16),l.Cc(22," Name "),l.Qb(),l.Qb(),l.Rb(23,"th",15),l.Rb(24,"div",17),l.Cc(25," Period "),l.Qb(),l.Qb(),l.Rb(26,"th",15),l.Rb(27,"div",17),l.Cc(28," Amount "),l.Qb(),l.Qb(),l.Rb(29,"th",15),l.Rb(30,"div",17),l.Cc(31," Status "),l.Qb(),l.Qb(),l.Rb(32,"th",15),l.Rb(33,"div",17),l.Cc(34," Action "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(35,"tbody"),l.Ac(36,M,13,8,"tr",18),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(37,"div",19),l.Ac(38,P,3,3,"div",20),l.Qb(),l.Qb(),l.Ac(39,S,8,3,"ng-template",null,21,l.Bc)),2&t&&(l.zb(6),l.gc("ngForOf",e.filtersList),l.zb(5),l.gc("ngIf",e.inmateBills.length>0),l.zb(25),l.gc("ngForOf",e.inmateBills),l.zb(2),l.gc("ngIf",e.pagination))},directives:[b.l,i.f,b.m,p.b,o.m,o.p,f.a,R.a],pipes:[b.d],styles:[""]}),t})();const z=[{path:"",component:B,data:{breadcrumb:"Bills"}},{path:"add-bill",component:g,data:{breadcrumb:"Monthly Bill Generation"}},{path:"list",component:B,data:{breadcrumb:"Bills"}}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[b.c,i.g.forChild(z)],i.g]}),t})();var x=n("PCNd");let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[b.c,x.a,i.g],F]}),t})()}}]);