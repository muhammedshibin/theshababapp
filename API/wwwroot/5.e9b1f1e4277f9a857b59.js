(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{h3gT:function(t,e,n){"use strict";n.r(e),n.d(e,"BillModule",function(){return A});var i=n("tyNb"),b=n("ofXK"),c=n("fXoL"),l=n("FayF"),a=n("5eHb"),o=n("3Pt+");function s(t,e){if(1&t&&(c.Rb(0,"option",14),c.Cc(1),c.Qb()),2&t){const t=e.$implicit,n=c.ac();c.gc("value",n.monthNames.indexOf(t)+1),c.zb(1),c.Ec("",t," ")}}function r(t,e){if(1&t&&(c.Rb(0,"li",28),c.Rb(1,"div",29),c.Rb(2,"p",30),c.Cc(3),c.Qb(),c.Rb(4,"p",30),c.Cc(5),c.bc(6,"currency"),c.Qb(),c.Qb(),c.Qb()),2&t){const t=e.$implicit;c.zb(3),c.Dc(t.transactionDetailName),c.zb(2),c.Dc(c.cc(6,2,t.amount))}}function d(t,e){if(1&t&&(c.Rb(0,"tr"),c.Rb(1,"td"),c.Cc(2),c.Qb(),c.Rb(3,"td"),c.Rb(4,"ul",25),c.Ac(5,r,7,4,"li",26),c.Qb(),c.Qb(),c.Rb(6,"td",27),c.Rb(7,"h4"),c.Cc(8),c.bc(9,"currency"),c.Qb(),c.Qb(),c.Qb()),2&t){const t=e.$implicit;c.zb(2),c.Dc(t.categoryName),c.zb(3),c.gc("ngForOf",t.transactionDetails),c.zb(3),c.Dc(c.cc(9,3,t.totalAmount))}}function u(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div"),c.Rb(1,"div",15),c.Rb(2,"table",16),c.Rb(3,"tr",17),c.Rb(4,"td"),c.Rb(5,"strong"),c.Rb(6,"h3"),c.Cc(7,"Transactions For "),c.Qb(),c.Qb(),c.Qb(),c.Rb(8,"td",18),c.Rb(9,"h3"),c.Cc(10),c.Qb(),c.Qb(),c.Mb(11,"td"),c.Qb(),c.Mb(12,"tr",19),c.Ac(13,d,10,5,"tr",20),c.Rb(14,"tr"),c.Mb(15,"td"),c.Rb(16,"td",21),c.Rb(17,"h4"),c.Cc(18,"Total"),c.Qb(),c.Qb(),c.Rb(19,"td",22),c.Rb(20,"h4"),c.Cc(21),c.bc(22,"currency"),c.Qb(),c.Qb(),c.Qb(),c.Rb(23,"tr"),c.Mb(24,"td"),c.Rb(25,"td",23),c.Rb(26,"button",24),c.Yb("click",function(){return c.uc(t),c.ac().onProceeding()}),c.Cc(27,"Generate Individual Bills"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&t){const t=c.ac();c.zb(10),c.Fc("",t.getMonthName(t.selectedMonth-1),",",t.selectedYear,""),c.zb(3),c.gc("ngForOf",t.monthlyBill.categoryWiseExpenses),c.zb(8),c.Dc(c.cc(22,4,t.monthlyBill.subTotal))}}let g=(()=>{class t{constructor(t,e){this.billService=t,this.toastr=e,this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.selectedMonth=(new Date).getUTCMonth(),this.selectedYear=(new Date).getUTCFullYear()}ngOnInit(){}onSubmit(){this.billService.generateMonthlyBills(this.selectedMonth,this.selectedYear).subscribe(t=>{this.monthlyBill=t},t=>{})}onProceeding(){this.billService.generateIndividualBills(this.selectedMonth,this.selectedYear).subscribe(t=>{this.toastr.success("Bills Generated Succesfully","Success")},t=>{this.toastr.error("Some Error occured","Error")})}getMonthName(t){return this.monthNames[t]}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(l.a),c.Lb(a.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-generate-bill"]],decls:21,vars:4,consts:[[1,"text-center"],[1,"container"],[3,"ngSubmit"],["billForm","ngForm"],[1,"row"],[1,"col-4"],[1,"lead"],["name","selectedMonth",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","year"],["type","number","name","selectedYear",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-1"],[1,"btn","btn-primary","mt-1"],[4,"ngIf"],[3,"value"],[1,"container","mt-5"],[1,"table","table-hover"],[1,"bg-light"],[1,"text-center","text-danger","text-strong"],[1,"bg-info"],[4,"ngFor","ngForOf"],[1,"text-dark"],[1,"align-middle","text-success"],["colspan","2"],[1,"btn","btn-outline-danger","btn-lg",3,"click"],[1,"list-group"],["class","list-group-item list-group-item-secondary",4,"ngFor","ngForOf"],[1,"align-middle"],[1,"list-group-item","list-group-item-secondary"],[1,"d-flex","justify-content-between"],[1,"text-info"]],template:function(t,e){1&t&&(c.Rb(0,"div"),c.Rb(1,"h2",0),c.Cc(2,"Generate Bill"),c.Qb(),c.Rb(3,"div",1),c.Rb(4,"form",2,3),c.Yb("ngSubmit",function(){return e.onSubmit()}),c.Rb(6,"div",4),c.Rb(7,"div",5),c.Rb(8,"h4",6),c.Cc(9,"Select Month"),c.Qb(),c.Rb(10,"select",7),c.Yb("ngModelChange",function(t){return e.selectedMonth=t}),c.Ac(11,s,2,2,"option",8),c.Qb(),c.Qb(),c.Rb(12,"div",5),c.Rb(13,"label",9),c.Cc(14,"Year"),c.Qb(),c.Rb(15,"input",10),c.Yb("ngModelChange",function(t){return e.selectedYear=t}),c.Qb(),c.Qb(),c.Rb(16,"div",11),c.Mb(17,"label"),c.Rb(18,"button",12),c.Cc(19,"Generate"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Ac(20,u,28,6,"div",13),c.Qb(),c.Qb()),2&t&&(c.zb(10),c.gc("ngModel",e.selectedMonth),c.zb(1),c.gc("ngForOf",e.monthNames),c.zb(4),c.gc("ngModel",e.selectedYear),c.zb(5),c.gc("ngIf",e.monthlyBill))},directives:[o.w,o.n,o.o,o.u,o.m,o.p,b.l,o.r,o.b,b.m,o.q,o.x],pipes:[b.d],styles:[""]}),t})();class m{constructor(t,e,n,i){this.month=n,this.year=i,this.pageNumber=t,this.pageSize=e}}var h=n("K3ix"),p=n("s3T5"),f=n("Lm2G"),R=n("SngD");const Q=["search"];function v(t,e){if(1&t){const t=c.Sb();c.Rb(0,"button",12),c.Yb("click",function(){return c.uc(t),c.ac(2).onFilterChange()})("ngModelChange",function(e){return c.uc(t),c.ac(2).billParams.paidPredicate=e}),c.Cc(1),c.Qb()}if(2&t){const t=e.$implicit,n=c.ac(2);c.hc("btnRadio",t.value),c.gc("ngModel",n.billParams.paidPredicate),c.zb(1),c.Dc(t.display)}}function y(t,e){if(1&t&&(c.Rb(0,"div"),c.Rb(1,"div",10),c.Ac(2,v,2,3,"button",11),c.Qb(),c.Qb()),2&t){const t=c.ac();c.zb(2),c.gc("ngForOf",t.filtersList)}}function C(t,e){if(1&t&&(c.Rb(0,"p",24),c.Cc(1),c.Qb()),2&t){const t=c.ac(2);c.zb(1),c.Fc("Showing ",t.inmateBills.length," of ",t.pagination.count," items")}}function M(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div"),c.Rb(1,"button",27),c.Yb("click",function(){c.uc(t);const e=c.ac().$implicit,n=c.ac(2),i=c.rc(12);return n.payBill(e,i)}),c.Cc(2,"Pay"),c.Qb(),c.Qb()}}function P(t,e){if(1&t&&(c.Rb(0,"tr"),c.Rb(1,"td",25),c.Rb(2,"strong"),c.Cc(3),c.Qb(),c.Qb(),c.Rb(4,"td",26),c.Cc(5),c.Qb(),c.Rb(6,"td",26),c.Cc(7),c.bc(8,"currency"),c.Qb(),c.Rb(9,"td",26),c.Cc(10),c.Qb(),c.Rb(11,"td",26),c.Ac(12,M,3,0,"div",5),c.Qb(),c.Qb()),2&t){const t=e.$implicit;c.zb(3),c.Ec(" ",t.inmate," "),c.zb(2),c.Fc(" ",t.month," , ",t.year," "),c.zb(2),c.Ec(" ",c.cc(8,6,t.billAmount)," "),c.zb(3),c.Ec(" ",0===t.paymentStatus?"Not Paid":"Paid"," "),c.zb(2),c.gc("ngIf",0===t.paymentStatus)}}function S(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div"),c.Rb(1,"div",13),c.Rb(2,"div"),c.Ac(3,C,2,2,"p",14),c.Qb(),c.Rb(4,"div"),c.Rb(5,"div",15),c.Rb(6,"input",16,17),c.Yb("keyup.enter",function(){return c.uc(t),c.ac().onSearch()}),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(8,"div",18),c.Rb(9,"table",19),c.Rb(10,"thead"),c.Rb(11,"tr"),c.Rb(12,"th",20),c.Rb(13,"div",21),c.Cc(14," Name "),c.Qb(),c.Qb(),c.Rb(15,"th",20),c.Rb(16,"div",22),c.Cc(17," Period "),c.Qb(),c.Qb(),c.Rb(18,"th",20),c.Rb(19,"div",22),c.Cc(20," Amount "),c.Qb(),c.Qb(),c.Rb(21,"th",20),c.Rb(22,"div",22),c.Cc(23," Status "),c.Qb(),c.Qb(),c.Rb(24,"th",20),c.Rb(25,"div",22),c.Cc(26," Action "),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(27,"tbody"),c.Ac(28,P,13,8,"tr",23),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&t){const t=c.ac();c.zb(3),c.gc("ngIf",t.inmateBills.length>0),c.zb(25),c.gc("ngForOf",t.inmateBills)}}function B(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",1),c.Rb(1,"div",28),c.Rb(2,"pagination",29),c.Yb("pageChanged",function(e){return c.uc(t),c.ac().onPageChange(e)}),c.Qb(),c.Qb(),c.Qb()}if(2&t){const t=c.ac();c.zb(2),c.gc("boundaryLinks",!0)("itemsPerPage",t.pagination.pageSize)("totalItems",t.pagination.count)}}function z(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",30),c.Rb(1,"h4",31),c.Cc(2,"Modal"),c.Qb(),c.Rb(3,"button",32),c.Yb("click",function(){return c.uc(t),c.ac().modalRef.hide()}),c.Rb(4,"span",33),c.Cc(5,"\xd7"),c.Qb(),c.Qb(),c.Qb(),c.Rb(6,"div",34),c.Rb(7,"app-bill-payment",35),c.Yb("paymentSuccess",function(e){c.uc(t);const n=c.ac(),i=c.rc(12);return n.onPaymentSuccess(e,i)}),c.Qb(),c.Qb()}if(2&t){const t=c.ac();c.zb(7),c.gc("inputAmount",t.selectedBill.billAmount)("inputInmateId",t.selectedBill.inmateId)("inputBillId",t.selectedBill.id)}}let F=(()=>{class t{constructor(t,e){this.billService=t,this.modalService=e,this.inmateBills=[],this.billParams=new m(1,5,null,null),this.filtersList=[{value:void 0,display:"All"},{value:"NotPaid",display:"Not Paid"},{value:"PartiallyPaid",display:"Not Fully Paid"},{value:"Paid",display:"Paid"}]}ngOnInit(){this.billParams.paidPredicate="NotPaid",this.loadBills()}loadBills(){this.billService.getBills(this.billParams).subscribe(t=>{this.inmateBills=t.result,this.pagination=t.pagination})}onPageChange(t){this.billParams.pageNumber=t.page,this.loadBills()}openModal(t){this.modalRef=this.modalService.show(t)}payBill(t,e){this.selectedBill=t,this.modalRef=this.modalService.show(e)}onPaymentSuccess(t,e){this.loadBills(),this.modalRef.hide()}onFilterChange(){this.billParams.pageNumber=1,this.billParams.pageSize=5,this.loadBills()}onSearch(){this.billParams.search=this.search.nativeElement.value,this.billParams.pageNumber=1,this.billParams.pageSize=5,this.loadBills()}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(l.a),c.Lb(h.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-bill-list"]],viewQuery:function(t,e){if(1&t&&c.Gc(Q,1),2&t){let t;c.qc(t=c.Zb())&&(e.search=t.first)}},decls:13,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-1"],[1,"col-sm-9","py-2","mb-1"],[1,"d-flex","justify-content-between"],[4,"ngIf"],["routerLink","/bills/add-bill",1,"btn","btn-info","btn-lg"],[1,"d-flex","justify-content-center"],["class","row",4,"ngIf"],["template",""],["name","paidPredicate",1,"btn-group"],["class","btn btn-outline-success btn-lg",3,"btnRadio","ngModel","click","ngModelChange",4,"ngFor","ngForOf"],[1,"btn","btn-outline-success","btn-lg",3,"btnRadio","ngModel","click","ngModelChange"],[1,"d-flex","justify-content-between","mt-2"],["class","text-muted",4,"ngIf"],[1,"form-inline"],["type","text","placeholder","Search",1,"form-control",3,"keyup.enter"],["search",""],[1,"table-responsive","mt-1"],[1,"table"],[1,"border-0","bg-light"],[1,"p-2","text-left","text-uppercase"],[1,"p-2","text-center","text-uppercase"],[4,"ngFor","ngForOf"],[1,"text-muted"],[1,"align-middle","text-left"],[1,"align-middle","text-center"],[1,"btn","btn-success",3,"click"],[1,"col-xs-12","col-12"],[3,"boundaryLinks","itemsPerPage","totalItems","pageChanged"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"inputAmount","inputInmateId","inputBillId","paymentSuccess"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.Mb(2,"div",2),c.Rb(3,"div",3),c.Rb(4,"div",4),c.Ac(5,y,3,1,"div",5),c.Rb(6,"a",6),c.Cc(7,"Generate Monthly Bill"),c.Qb(),c.Qb(),c.Ac(8,S,29,2,"div",5),c.Qb(),c.Qb(),c.Rb(9,"div",7),c.Ac(10,B,3,3,"div",8),c.Qb(),c.Qb(),c.Ac(11,z,8,3,"ng-template",null,9,c.Bc)),2&t&&(c.zb(5),c.gc("ngIf",e.inmateBills.length>0),c.zb(3),c.gc("ngIf",e.inmateBills.length>0),c.zb(2),c.gc("ngIf",e.pagination&&e.inmateBills.length>0))},directives:[b.m,i.f,b.l,p.b,o.m,o.p,f.a,R.a],pipes:[b.d],styles:[""]}),t})();const x=[{path:"",component:F,data:{breadcrumb:"Bills"}},{path:"add-bill",component:g,data:{breadcrumb:"Monthly Bill Generation"}},{path:"list",component:F,data:{breadcrumb:"Bills"}}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[b.c,i.g.forChild(x)],i.g]}),t})();var w=n("PCNd");let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[b.c,w.a,i.g],I]}),t})()}}]);